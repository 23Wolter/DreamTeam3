
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sketch 1</title>
    <!--<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>-->
    <script src="../bower_components/aframe/dist/aframe-v0.7.1.min.js"></script>
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <meta name="description" content="Hello, WebVR! - A-Frame">
</head>

<body>
    <a-scene id="course-scene">
        <a-sky color="#262626"></a-sky>
        <!--<a-entity camera look-controls wasd-controls></a-entity>-->
        <a-entity id="course-progress-bar" position="0 0 0" rotation="-90 0 ">
            <a-circle position="0 0 0" radius="3" color="#00FF00"></a-circle>
            <a-circle position="0 0 0.1" radius="2.5" color="#262626"></a-circle>
            <!--<a-circle position="0 0 0" radius="2.5" color="#262626"></a-circle>-->
        </a-entity>

        <a-entity id=course-group-1 class="course-group" rotation="0 45 0" position="-8 2 -2">
            <!--<a-plane position="0 0 0" rotation="0 0 0" width="0.1" height="0.1" color="#FFF"></a-plane>-->
            <a-plane position="-2 0.5 0" rotation="0 0 0" width="1.9" height="1.9" color="#742E7F"></a-plane>
            <a-plane position="-2 -1 0" rotation="0 0 0" width="1.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="-0.5 0 0" rotation="0 0 0" width="0.9" height="2.9" color="#742E7F"></a-plane>
            <a-plane position="0.5 1 0" rotation="0 0 0" width="0.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="1.5 1 0" rotation="0 0 0" width="0.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="1 -0.5 0" rotation="0 0 0" width="1.9" height="1.9" color="#742E7F"></a-plane>
            <a-plane position="2.5 0 0" rotation="0 0 0" width="0.9" height="2.9" color="#742E7F"></a-plane>
        </a-entity>

        <a-entity id=course-group-2 class="course-group" rotation="0 0 0" position="0 2 -4">
            <!--<a-plane position="0 0 0" rotation="0 0 0" width="0.1" height="0.1" color="#FFF"></a-plane>-->
            <a-plane position="-2 0.5 0" rotation="0 0 0" width="1.9" height="1.9" color="#742E7F"></a-plane>
            <a-plane position="-2 -1 0" rotation="0 0 0" width="1.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="-0.5 0 0" rotation="0 0 0" width="0.9" height="2.9" color="#742E7F"></a-plane>
            <a-plane position="0.5 1 0" rotation="0 0 0" width="0.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="1.5 1 0" rotation="0 0 0" width="0.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="1 -0.5 0" rotation="0 0 0" width="1.9" height="1.9" color="#742E7F"></a-plane>
            <a-plane position="2.5 0 0" rotation="0 0 0" width="0.9" height="2.9" color="#742E7F"></a-plane>
        </a-entity>

        <a-entity id=course-group-3 class="course-group" rotation="0 -45 0" position="8 2 -2">
            <!--<a-plane position="0 0 0" rotation="0 0 0" width="0.1" height="0.1" color="#FFF"></a-plane>-->
            <a-plane position="-2 0.5 0" rotation="0 0 0" width="1.9" height="1.9" color="#742E7F"></a-plane>
            <a-plane position="-2 -1 0" rotation="0 0 0" width="1.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="-0.5 0 0" rotation="0 0 0" width="0.9" height="2.9" color="#742E7F"></a-plane>
            <a-plane position="0.5 1 0" rotation="0 0 0" width="0.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="1.5 1 0" rotation="0 0 0" width="0.9" height="0.9" color="#742E7F"></a-plane>
            <a-plane position="1 -0.5 0" rotation="0 0 0" width="1.9" height="1.9" color="#742E7F"></a-plane>
            <a-plane position="2.5 0 0" rotation="0 0 0" width="0.9" height="2.9" color="#742E7F"></a-plane>
        </a-entity>
    </a-scene>
</body>
</html>

<script>

    $(document).ready(function(){
        $('a-scene').find('.course-group a-plane').hover(function() {
            console.log("hello");

        }, function() {
            console.log("goodbye");
        });
    });


    let courses = [
        {"index": "1", "title" : "Vindmøller", "latitude" : "0", "longitude" : "-4", "elevation" : "-4"},
        {"index": "2", "title" : "Ozonlaget", "latitude" : "0", "longitude" : "-4", "elevation" : "-4"},
        {"index": "3", "title" : "Fossile Brændstoffer", "latitude" : "0", "longitude" : "-4", "elevation" : "-4"}
    ];


    $(courses).each(function(i){
        $("#course-scene").append(new CourseGroupTemplate(courses[i]).html);
    });


    // constructor for courses
    function CourseGroupTemplate(course_data){
        this.title = course_data.title.replace(" ", "-").toLowerCase();

        this.cartesian_pos = PolarToCartesian(course_data.latitude, course_data.longitude, course_data.elevation);
        this.x = this.cartesian_pos[0].toFixed(2);
        this.y = this.cartesian_pos[1].toFixed(2);
        this.z = this.cartesian_pos[2].toFixed(2);

        this.cartesian_rot = EulerRotationTowardsPoint(this.x, this.y, this.z);
        this.rot_x = this.cartesian_rot[0];
        this.rot_y = this.cartesian_rot[1];
        this.rot_z = this.cartesian_rot[2];

        this.html =
            '<a-entity id=course-group-'+ this.title +' class="course-group" rotation="' + this.rot_x +' '+ this.rot_y +' '+ this.rot_z + '">' +
                '<a-plane position="' + this.x +' '+ this.y +' '+ this.z + '" rotation="0 0 0" width="6" height="3.5" color="#742E7F"></a-plane>' +
            '</a-entity>';
    }


    // convert circular coordinates to x, y, z
    function PolarToCartesian(latitude, longitude, elevation){
        const x = Math.cos(latitude) * Math.cos(longitude) * elevation;
        const y = Math.cos(latitude) * Math.sin(longitude) * elevation;
        const z = Math.sin(latitude) * elevation;
        return [x, y, z];
    }

    // point normal vectors towards camera
    function EulerRotationTowardsPoint(x, y, z){
        const rot_x = x;
        const rot_y = y;
        const rot_z = z;
        return [rot_x, rot_y, rot_z];
    }

</script>



<!-- view-source:https://a-frobot.github.io/aframe/examples/test/text/sizes.html -->
